<template>
    <div class="page" data-name="parks" id="parks">
        <!-- Top Navbar -->
        <div class="navbar">
            <div class="navbar-inner row no-gap">
                <div class="toolbar tabbar toolbar-bottom">
                    <div class="toolbar-inner">
                        {{#each parks}}
                        <a href="#{{slug}}" class="{{#if @last}}bright {{/if}} tab-link {{#if @first}}tab-link-active bleft{{/if}}">{{Nombre}}</a>
                        {{/each}}
                    </div>
                </div>
            </div>
        </div>
        <div class="page-content hide-navbar-on-scroll">
            <div class="tabs">
                {{#each parks}}
                    <div class="tab {{#if @first}}tab-active{{/if}}" id="{{slug}}">
                        <div class="cover lazy lazy-fade-in"
                            data-background="http://hacienda1800.com{{cover.path}}">
                            <div class="title">
                                <p>{{Nombre}}</p>
                            </div>
                            <div class="elements row">
                                <div class="element col">
                                    <img src="static/icons/Clock.svg" alt="">
                                    <p>Horarios</p>
                                    <p class="normal horarios">
                                        {{#horario_es}}
                                        {{value.diainicio}} - {{value.diafinal}} <br> {{value.tiempoinicio}} - {{value.tiempofin}}
                                        {{/horario_es}}
                                        </p>
                                </div>
                                <div class="element col">
                                        <img src="static/icons/Level.svg" alt="">
                                    <p>Nivel de actividades</p>
                                    <p class="normal actividad">{{nivel_actividad_es}}</p>
                                </div>
                                <div class="element col">
                                        <img src="static/icons/Clock.svg" alt="">
                                    <p>Estadia aproximada</p>
                                    <p class="normal">{{estadia_es}}</p>
                                </div>
                                <a href="#{{slug}}-map" class="element location col">
                                        <img src="static/icons/Map.svg" alt="">
                                    <p>Ubicacion</p>
                                    <p class="normal"></p>
                                </a>
                            </div>
                        </div>
                        <div class="row desc">
                            <p>
                                {{Descripcion}}
                            </p>
                        </div>
                        {{#Fotos}}
                        <div class="photo lazy lazy-fade-in" data-background="http://hacienda1800.com{{path}}">
                            <!-- <div class="txt-box left">
                                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor
                                    incididunt ut labore et dolore magna aliqua.</p>
                            </div> -->
                        </div>
                        {{/Fotos}}

                        <div data-pagination='{"el": ".swiper-pagination"}' data-space-between="30" data-loop="true"
                            data-slides-per-view="auto" class="swiper-container swiper-init">
                            <!-- <div class="swiper-pagination"></div> -->
                            <div class="swiper-wrapper">
                                {{#exp_info}}
                                <div class="swiper-slide">
                                    <div class="bg" style="background-image: url('static/img/experience.png');"></div>
                                    <div class="txt-box">
                                        <div class="title">{{display}}</div>
                                        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor
                                            incididunt ut labore et dolore magna aliqua.</p>
                                    </div>
                                </div>
                                {{/exp_info}}

                            </div>
                        </div>

                        <div id="{{slug}}-map" class="map">

                        </div>
                        <div class="footer"
                            style="background-image: url('static/img/hacienda1800-experiences-footer-lake.png')">
                            <div class="title">
                                <p>DUNAS</p>
                            </div>
                            <button class="button button-raised button-fill button-round">Contacto</button>
                        </div>
                    </div>
                {{/each}}


                <div class="tab" id="canon">
                        <div class="cover"
                        style="background-image: url('static/img/hacienda1800-experiences-cover-kayak.png')">
                        <div class="title">
                            <p>Cañon</p>
                        </div>
                        <div class="elements row">
                            <div class="element col">
                                <img src="static/icons/Clock.svg" alt="">
                                <p>Horarios</p>
                                <p class="normal">08:00 - 22:00</p>
                            </div>
                            <div class="element col">
                                    <img src="static/icons/Level.svg" alt="">
                                <p>Nivel de actividades</p>
                                <p class="normal">Ligera</p>
                            </div>
                            <div class="element col">
                                    <img src="static/icons/Clock.svg" alt="">
                                <p>Estadia aproximada</p>
                                <p class="normal">3 hras</p>
                            </div>
                            <a href="#{{slug}}" class="element col">
                                    <img src="static/icons/Map.svg" alt="">
                                <p>Ubicacion</p>
                                <p class="normal"></p>
                            </a>
                        </div>
                    </div>
                    <div class="row desc">
                        <p>
                            Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut
                            labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco
                            laboris nisi ut aliquip
                            ex ea commodo consequat.
                        </p>
                    </div>

                    <div class="photo" style="background-image: url('static/img/experience.png')">
                        <div class="txt-box left">
                            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor
                                incididunt ut labore et dolore magna aliqua.</p>
                        </div>
                    </div>
                    <div class="photo"
                        style="background-image: url('static/img/hacienda1800-experiences-footer-lake.png')">
                    </div>
                    <div data-pagination='{"el": ".swiper-pagination"}' data-space-between="30" data-loop="true"
                        data-slides-per-view="auto" class="swiper-container swiper-init">
                        <!-- <div class="swiper-pagination"></div> -->
                        <div class="swiper-wrapper">
                            <div class="swiper-slide">
                                <div class="bg" style="background-image: url('static/img/experience.png');"></div>
                                <div class="txt-box">
                                    <div class="title">CAMINATA</div>
                                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor
                                        incididunt ut labore et dolore magna aliqua.</p>
                                </div>
                            </div>
                            <div class="swiper-slide">
                                <div class="bg"
                                    style="background-image: url('static/img/hacienda1800-experiences-cover-kayak.png');">
                                </div>
                                <div class="txt-box">
                                    <div class="title">PASEO</div>
                                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor
                                        incididunt ut labore et dolore magna aliqua.</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="map">

                    </div>
                    <div class="footer"
                        style="background-image: url('static/img/hacienda1800-experiences-footer-lake.png')">
                        <div class="title">
                            <p>Cañon</p>
                        </div>
                        <button class="button button-raised button-fill button-round">Contacto</button>
                    </div>
                </div>

                <div class="tab" id="rio">
                        <div class="cover"
                        style="background-image: url('static/img/hacienda1800-experiences-cover-kayak.png')">
                        <div class="title">
                            <p>Rio Mezquite</p>
                        </div>
                        <div class="elements row">
                            <div class="element col">
                                <img src="static/icons/Clock.svg" alt="">
                                <p>Horarios</p>
                                <p class="normal">08:00 - 22:00</p>
                            </div>
                            <div class="element col">
                                    <img src="static/icons/Level.svg" alt="">
                                <p>Nivel de actividades</p>
                                <p class="normal">Ligera</p>
                            </div>
                            <div class="element col">
                                    <img src="static/icons/Clock.svg" alt="">
                                <p>Estadia aproximada</p>
                                <p class="normal">3 hras</p>
                            </div>
                            <div class="element col">
                                    <img src="static/icons/Map.svg" alt="">
                                <p>Ubicacion</p>
                                <p class="normal"></p>
                            </div>
                        </div>
                    </div>
                    <div class="row desc">
                        <p>
                            Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut
                            labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco
                            laboris nisi ut aliquip
                            ex ea commodo consequat.
                        </p>
                    </div>

                    <div class="photo" style="background-image: url('static/img/experience.png')">
                        <div class="txt-box left">
                            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor
                                incididunt ut labore et dolore magna aliqua.</p>
                        </div>
                    </div>
                    <div class="photo"
                        style="background-image: url('static/img/hacienda1800-experiences-footer-lake.png')">
                    </div>
                    <div data-pagination='{"el": ".swiper-pagination"}' data-space-between="30" data-loop="true"
                        data-slides-per-view="auto" class="swiper-container swiper-init">
                        <!-- <div class="swiper-pagination"></div> -->
                        <div class="swiper-wrapper">
                            <div class="swiper-slide">
                                <div class="bg" style="background-image: url('static/img/experience.png');"></div>
                                <div class="txt-box">
                                    <div class="title">CAMINATA</div>
                                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor
                                        incididunt ut labore et dolore magna aliqua.</p>
                                </div>
                            </div>
                            <div class="swiper-slide">
                                <div class="bg"
                                    style="background-image: url('static/img/hacienda1800-experiences-cover-kayak.png');">
                                </div>
                                <div class="txt-box">
                                    <div class="title">PASEO</div>
                                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor
                                        incididunt ut labore et dolore magna aliqua.</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="map">

                    </div>
                    <div class="footer"
                        style="background-image: url('static/img/hacienda1800-experiences-footer-lake.png')">
                        <div class="title">
                            <p>Rio Mezquite</p>
                        </div>
                        <button class="button button-raised button-fill button-round">Contacto</button>
                    </div>

                </div>

                <div class="tab" id="minas">
                        <div class="cover"
                        style="background-image: url('static/img/hacienda1800-experiences-cover-kayak.png')">
                        <div class="title">
                            <p>MINAS</p>
                        </div>
                        <div class="elements row">
                            <div class="element col">
                                <img src="static/icons/Clock.svg" alt="">
                                <p>Horarios</p>
                                <p class="normal">08:00 - 22:00</p>
                            </div>
                            <div class="element col">
                                    <img src="static/icons/Level.svg" alt="">
                                <p>Nivel de actividades</p>
                                <p class="normal">Ligera</p>
                            </div>
                            <div class="element col">
                                    <img src="static/icons/Clock.svg" alt="">
                                <p>Estadia aproximada</p>
                                <p class="normal">3 hras</p>
                            </div>
                            <div class="element col">
                                    <img src="static/icons/Map.svg" alt="">
                                <p>Ubicacion</p>
                                <p class="normal"></p>
                            </div>
                        </div>
                    </div>
                    <div class="row desc">
                        <p>
                            Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut
                            labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco
                            laboris nisi ut aliquip
                            ex ea commodo consequat.
                        </p>
                    </div>

                    <div class="photo" style="background-image: url('static/img/experience.png')">
                        <div class="txt-box left">
                            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor
                                incididunt ut labore et dolore magna aliqua.</p>
                        </div>
                    </div>
                    <div class="photo"
                        style="background-image: url('static/img/hacienda1800-experiences-footer-lake.png')">
                    </div>
                    <div data-pagination='{"el": ".swiper-pagination"}' data-space-between="30" data-loop="true"
                        data-slides-per-view="auto" class="swiper-container swiper-init">
                        <!-- <div class="swiper-pagination"></div> -->
                        <div class="swiper-wrapper">
                            <div class="swiper-slide">
                                <div class="bg" style="background-image: url('static/img/experience.png');"></div>
                                <div class="txt-box">
                                    <div class="title">CAMINATA</div>
                                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor
                                        incididunt ut labore et dolore magna aliqua.</p>
                                </div>
                            </div>
                            <div class="swiper-slide">
                                <div class="bg"
                                    style="background-image: url('static/img/hacienda1800-experiences-cover-kayak.png');">
                                </div>
                                <div class="txt-box">
                                    <div class="title">PASEO</div>
                                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor
                                        incididunt ut labore et dolore magna aliqua.</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="map">

                    </div>
                    <div class="footer"
                        style="background-image: url('static/img/hacienda1800-experiences-footer-lake.png')">
                        <div class="title">
                            <p>MINAS</p>
                        </div>
                        <button class="button button-raised button-fill button-round">Contacto</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Scrollable page content-->

</template>
<script>
    import $$ from 'dom7';

    export default {

        on: {
            pageInit: function(e, page) {

                var self = this;
                var app = self.$app;
                var myLatLng = self.parks[0].Locacion;

                var experiences_ids = [];
                let parques = [];
                let experiencias = [];
                self.parks
                for (let park of self.parks) {
                    park.exp_info = [];

                    let parque = park;
                    for (let exp of parque.Experiencias) {
                        let experiencia = exp;
                        let filter = '&filter[_id]=' + experiencia._id;
                        app.request.promise.json(this.$app.methods.getCollection('Experiencias', filter))
                            .then(res => {

                                parque.exp_info.push(res.data.entries[0]);

                            });

                    }
                }



                var map;
                map = new google.maps.Map(document.getElementById('canion-map'), {
                    center: myLatLng,
                    zoom: 13
                });
                var marker = new google.maps.Marker({
                    position: myLatLng,
                    map: map
                });
                //var lang = url.searchParams.get("c");
                console.log();

                $$('.dynamic-popup').on('click', function() {
                    dynamicPopup.open();
                });
                $$('.element.location').on('click', function(e) {
                    e.preventDefault();
                    var move = $$(this).attr('href');
                    move = move.toString();
                    console.log(move);
                    $$([document.documentElement, document.body]).animate({
                        scrollTop: $$(move).offset().top
                    }, 2000);
                });
            }
        }

    }
</script>