<template>
    <div class="page" data-name="parks" id="parks">
        <!-- Top Navbar -->
        {{#test}}
            {{Nombre}}
        {{/test}}
        <div class="navbar">
            <div class="navbar-inner row no-gap">
                <div class="toolbar tabbar toolbar-bottom">
                    <div class="toolbar-inner">
                        {{#each parks}}
                        <a href="#{{slug}}" class="{{#if @last}}bright {{/if}} tab-link {{#if @first}}tab-link-active bleft{{/if}}">{{Nombre}}</a>
                        {{#each exper}}
                            <p>{{Nombre}}</p>
                        {{/each}}
                        {{/each}}
                    </div>
                </div>
            </div>
        </div>
        <div class="page-content hide-navbar-on-scroll">
            <div class="tabs">
                {{#each parks}}
                    <div class="tab {{#if @first}}tab-active{{/if}}" id="{{slug}}">
                        <div class="cover lazy lazy-fade-in"
                            data-background="http://hacienda1800.com{{cover.path}}">
                            <div class="title">
                                <p>{{Nombre}}</p>
                            </div>
                            <div class="elements row">
                                <div class="element col">
                                    <img src="static/icons/Clock.svg" alt="">
                                    <p>Horarios</p>
                                    <p class="normal horarios">
                                        {{#horario_es}}
                                        {{value.diainicio}} - {{value.diafinal}} <br> {{value.tiempoinicio}} - {{value.tiempofin}}
                                        {{/horario_es}}
                                        </p>
                                </div>
                                <div class="element col">
                                        <img src="static/icons/Level.svg" alt="">
                                    <p>Nivel de actividades</p>
                                    <p class="normal actividad">{{nivel_actividad_es}}</p>
                                </div>
                                <div class="element col">
                                        <img src="static/icons/Clock.svg" alt="">
                                    <p>Estadia aproximada</p>
                                    <p class="normal">{{estadia_es}}</p>
                                </div>
                                <a href="#{{slug}}-map" class="element location col">
                                        <img src="static/icons/Map.svg" alt="">
                                    <p>Ubicacion</p>
                                    <p class="normal"></p>
                                </a>
                            </div>
                        </div>
                        <div class="row desc">
                            <p>
                                {{Descripcion}}
                            </p>
                        </div>
                        {{#if exper}}

                            {{#exper}}
                                 {{Nombre}}
                            {{/exper}}
                        {{else}}
                            test no
                        {{/if}}
                        {{#exper}}
                            {{Nombre}}
                        {{/exper}}
                        {{#Fotos}}
                        <div class="photo lazy lazy-fade-in" data-background="https://hacienda1800.com{{path}}">
                            <!-- <div class="txt-box left">
                                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor
                                    incididunt ut labore et dolore magna aliqua.</p>
                            </div> -->
                        </div>
                        {{/Fotos}}

                        <div data-pagination='{"el": ".swiper-pagination"}' data-space-between="30" data-loop="true"
                            data-slides-per-view="auto" class="swiper-container swiper-init">
                            <!-- <div class="swiper-pagination"></div> -->
                            <div class="swiper-wrapper" id="{{slug}}-exp-slider">




                            </div>
                        </div>

                        <div id="{{slug}}-map" class="map">

                        </div>
                        <div class="footer"
                            style="background-image: url('static/img/hacienda1800-experiences-footer-lake.png')">
                            <div class="title">
                                <p>DUNAS</p>
                            </div>
                            <button class="button button-raised button-fill button-round">Contacto</button>
                        </div>
                    </div>
                {{/each}}



            </div>
        </div>
    </div>
    <!-- Scrollable page content-->

</template>
<script>
    import $$ from 'dom7';

    export default {


        on: {

            pageInit: function(e, page) {
                console.log('init');
                var self = this;
                var app = self.$app;

                var myLatLng = self.parks[0].Locacion;



                for(let park of self.parks){

                    for(let exp of park.exper){
                        console.log(exp);

                        // let expHtml = '<div class="swiper-slide"> <div class="bg" style="background-image: url('+exp.thumbnail.path+');"></div> <div class="txt-box"> <div class="title">'+exp.Nombre+'</div> <p>'+exp.Descripcion+'.</p> </div> </div>';
                        // $$('#'+parque.slug+'-exp-slider').append(expHtml);
                    }
                }






                var map;
                map = new google.maps.Map(document.getElementById('canion-map'), {
                    center: myLatLng,
                    zoom: 13
                });
                var marker = new google.maps.Marker({
                    position: myLatLng,
                    map: map
                });
                //var lang = url.searchParams.get("c");

                $$('.dynamic-popup').on('click', function() {
                    dynamicPopup.open();
                });
                $$('.element.location').on('click', function(e) {
                    e.preventDefault();
                    var move = $$(this).attr('href');
                    move = move.toString();
                    console.log(move);
                    $$([document.documentElement, document.body]).animate({
                        scrollTop: $$(move).offset().top
                    }, 2000);
                });
            }
        }

    }
</script>